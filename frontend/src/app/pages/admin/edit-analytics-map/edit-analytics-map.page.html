<div class="edit-analytics-map">
    <page-header
        class="edit-analytics-map__header"
        [title]="'Редактирование карты'"
        [options]="headerOptions"
    />
    @if (zoomActions(); as zoomActions) {
        <map-zoom
            class="edit-analytics-map__zoom-controls"
            [zoomActions]="zoomActions"
        />
    }
    @if (model()?.layers) {
        <map
            [layers]="model()!.layers"
            [config]="config"
            [isReadonly]="true"
        ></map>
    }
    @if (model(); as model) {
        <edit-analytics-map-modal
            class="edit-analytics-map__modal"
            [model]="model"
            [card]="card()"
            [isSaving]="isSaving()"
            (mapSaved)="handleMapSave($event)"
            (activeItemsChanged)="handleRegionsChange($event)"
            (dirtyChange)="hasUnsavedChanges.set($event)"
        />
    }
</div>
