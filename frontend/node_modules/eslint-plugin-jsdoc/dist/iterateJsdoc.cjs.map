{"version":3,"file":"iterateJsdoc.cjs","names":["jsdocUtils","_interopRequireWildcard","require","_jsdoccomment","_commentParser","_esquery","_interopRequireDefault","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","rewireSpecs","seedTokens","util","globalState","Map","getBasicUtils","context","mode","tagNamePreference","utils","method","tagName","reportSettings","message","report","loc","end","column","line","start","parseClosureTemplateTag","tag","pathDoesNotBeginWith","getPreferredTagNameObject","ret","getPreferredTagNameSimple","isObject","replacement","blocked","getUtils","node","jsdoc","jsdocNode","settings","sc","iteratingAll","ruleConfig","indent","ancestors","getAncestors","sourceCode","getSourceCode","augmentsExtendsReplacesDocs","ignoreReplacesDocs","implementsReplacesDocs","maxLines","minLines","overrideReplacesDocs","functionTypes","isIteratingFunction","includes","String","type","isIteratingFunctionOrVariable","declarations","declaration","some","init","isVirtualFunction","Boolean","hasATag","stringify","tagBlock","specRewire","block","commentStringify","reportJSDoc","msg","handler","data","fixer","extraFix","text","getText","lastLineBreakPos","slice","range","search","removeRange","test","charAt","replaceText","getRegexFromString","str","requiredFlags","getTagDescription","tg","returnArray","setTagDescription","matcher","setter","finalIdx","source","tokens","description","idx","getDescription","descriptions","lastDescriptionLine","tagsBegun","push","length","join","setBlockDescription","descLines","startIdx","endIdx","info","delimiter","postDelimiter","undefined","splice","setDescriptionLines","changeTag","src","entries","setTag","number","removeTag","tagIndex","removeEmptyBlock","tagSourceOffset","tagSource","tags","lastIndex","firstNumber","tagIdx","sourceIndex","findIndex","srcNumber","spliceCount","ending","spliceIdx","item","addTag","targetTagName","getFirstLine","firstLine","emptyTokens","prop","addLine","addLines","numLines","makeLine","makeLines","Array","from","lines","makeMultiline","lineEnd","name","postName","postTag","postType","trimEnd","flattenRoots","getFunctionParameterNames","useDefaultObjectProperties","hasParams","isGenerator","generator","value","isConstructor","getJsdocTagsDeep","getPreferredTagName","args","isValidTag","definedTags","names","hasTag","comparePaths","dropPathSegmentQuotes","avoidDocs","classHasTag","exemptSpeciaMethods","meta","schema","exemptedBy","options","getPresentTags","otherModeMaps","result","otherResult","otherModeMap","otherMode","tagMissingRequiredTypeOrNamepath","every","getTagStructureForMode","mde","structuredTags","mayBeUndefinedTypeTag","hasValueOrExecutorHasNonEmptyResolveValue","anyPromiseAsReturn","allBranches","hasYieldValue","hasYieldReturnValue","hasThrowValue","isAsync","async","getTags","tagList","filterTags","filter","filterAllTags","getAllTags","getTagsByType","hasOptionTag","getClassNode","toReversed","find","parent","getClassJsdoc","classNode","classJsdocNode","getJSDocComment","parseComment","classJsdoc","forEachPreferredTag","arrayHandler","skipReportingBlockedTag","findContext","contexts","comment","foundContext","cntxt","esquery","matches","parse","visitorKeys","contextStr","getSettings","ignorePrivate","ignoreInternal","Number","preferredTypes","exemptDestructuredRootsFromChecks","setTagStructure","overrideTagStructure","error","exports","makeReport","commentNode","fix","jsdocLoc","lineNumber","colNumber","iterate","iterator","state","jsdocNde","checkInternal","checkPrivate","getIndentAndJSDoc","sourceLine","indentChar","indnt","repeat","jsdc","iterateAllJsdocs","additiveCommentContexts","trackedJsdocs","Set","callIterator","jsdocNodes","lastCall","selector","lastComment","settngs","exit","create","commentHandler","*:not(Program)","noTracking","nonComment","ste","add","Program:exit","allComments","getAllComments","untrackedJSdoc","checkFile","allComms","iterateJsdoc","metaType","TypeError","ctx","modifyContext","contextDefaults","contextSelected","matchContext","match","enforcedContexts","nonGlobalSettings","map","obj","hasPlainAny","hasObjectAny","ctxt","checkJsdoc","contextObject","getContextObject","bind"],"sources":["../src/iterateJsdoc.js"],"sourcesContent":["import * as jsdocUtils from './jsdocUtils.js';\nimport {\n  commentHandler,\n  getJSDocComment,\n  parseComment,\n} from '@es-joy/jsdoccomment';\nimport {\n  stringify as commentStringify,\n  util,\n} from 'comment-parser';\nimport esquery from 'esquery';\n\n/**\n * @typedef {number} Integer\n */\n\n/**\n * @typedef {import('@es-joy/jsdoccomment').JsdocBlockWithInline} JsdocBlockWithInline\n */\n\n/**\n * @typedef {{\n *   disallowName?: string,\n *   allowName?: string,\n *   context?: string,\n *   comment?: string,\n *   tags?: string[],\n *   replacement?: string,\n *   minimum?: Integer,\n *   message?: string,\n *   forceRequireReturn?: boolean\n * }} ContextObject\n */\n/**\n * @typedef {string|ContextObject} Context\n */\n\n/**\n * @callback CheckJsdoc\n * @param {{\n *   lastIndex?: Integer,\n *   isFunctionContext?: boolean,\n *   selector?: string,\n *   comment?: string\n * }} info\n * @param {null|((jsdoc: import('@es-joy/jsdoccomment').JsdocBlockWithInline) => boolean|undefined)} handler\n * @param {import('eslint').Rule.Node} node\n * @returns {void}\n */\n\n/**\n * @callback ForEachPreferredTag\n * @param {string} tagName\n * @param {(\n *   matchingJsdocTag: import('@es-joy/jsdoccomment').JsdocTagWithInline,\n *   targetTagName: string\n * ) => void} arrayHandler\n * @param {boolean} [skipReportingBlockedTag]\n * @returns {void}\n */\n\n/**\n * @callback ReportSettings\n * @param {string} message\n * @returns {void}\n */\n\n/**\n * @callback ParseClosureTemplateTag\n * @param {import('comment-parser').Spec} tag\n * @returns {string[]}\n */\n\n/**\n * @callback GetPreferredTagNameObject\n * @param {{\n *   tagName: string\n * }} cfg\n * @returns {string|false|{\n *   message: string;\n *   replacement?: string|undefined\n * }|{\n *   blocked: true,\n *   tagName: string\n * }}\n */\n\n/**\n * @typedef {{\n *   forEachPreferredTag: ForEachPreferredTag,\n *   reportSettings: ReportSettings,\n *   parseClosureTemplateTag: ParseClosureTemplateTag,\n *   getPreferredTagNameObject: GetPreferredTagNameObject,\n *   pathDoesNotBeginWith: import('./jsdocUtils.js').PathDoesNotBeginWith\n *   isNamepathDefiningTag: IsNamepathX,\n *   isNamepathReferencingTag: IsNamepathX,\n *   isNamepathOrUrlReferencingTag: IsNamepathX,\n *   tagMightHaveNamepath: IsNamepathX,\n * }} BasicUtils\n */\n\n/**\n * @callback IsIteratingFunction\n * @returns {boolean}\n */\n\n/**\n * @callback IsVirtualFunction\n * @returns {boolean}\n */\n\n/**\n * @callback Stringify\n * @param {import('comment-parser').Block} tagBlock\n * @param {boolean} [specRewire]\n * @returns {string}\n */\n\n/**\n * @callback ReportJSDoc\n * @param {string} msg\n * @param {null|import('comment-parser').Spec|{line: Integer, column?: Integer}} [tag]\n * @param {((fixer: import('eslint').Rule.RuleFixer) => import('eslint').Rule.Fix|void)|null} [handler]\n * @param {boolean} [specRewire]\n * @param {undefined|{\n *   [key: string]: string\n * }} [data]\n */\n\n/**\n * @callback GetRegexFromString\n * @param {string} str\n * @param {string} [requiredFlags]\n * @returns {RegExp}\n */\n\n/**\n * @callback GetTagDescription\n * @param {import('comment-parser').Spec} tg\n * @param {boolean} [returnArray]\n * @returns {string[]|string}\n */\n\n/**\n * @callback SetTagDescription\n * @param {import('comment-parser').Spec} tg\n * @param {RegExp} matcher\n * @param {(description: string) => string} setter\n * @returns {Integer}\n */\n\n/**\n * @callback GetDescription\n * @returns {{\n *   description: string,\n *   descriptions: string[],\n *   lastDescriptionLine: Integer\n * }}\n */\n\n/**\n * @callback SetBlockDescription\n * @param {(\n *   info: {\n *     delimiter: string,\n *     postDelimiter: string,\n *     start: string\n *   },\n *   seedTokens: (\n *     tokens?: Partial<import('comment-parser').Tokens>\n *   ) => import('comment-parser').Tokens,\n *   descLines: string[]\n * ) => import('comment-parser').Line[]} setter\n * @returns {void}\n */\n\n/**\n * @callback SetDescriptionLines\n * @param {RegExp} matcher\n * @param {(description: string) => string} setter\n * @returns {Integer}\n */\n\n/**\n * @callback ChangeTag\n * @param {import('comment-parser').Spec} tag\n * @param {...Partial<import('comment-parser').Tokens>} tokens\n * @returns {void}\n */\n\n/**\n * @callback SetTag\n * @param {import('comment-parser').Spec & {\n *   line: Integer\n * }} tag\n * @param {Partial<import('comment-parser').Tokens>} [tokens]\n * @returns {void}\n */\n\n/**\n * @callback RemoveTag\n * @param {Integer} tagIndex\n * @param {{\n *   removeEmptyBlock?: boolean,\n *   tagSourceOffset?: Integer\n * }} [cfg]\n * @returns {void}\n */\n\n/**\n * @callback AddTag\n * @param {string} targetTagName\n * @param {Integer} [number]\n * @param {import('comment-parser').Tokens|{}} [tokens]\n * @returns {void}\n */\n\n/**\n * @callback GetFirstLine\n * @returns {Integer|undefined}\n */\n\n/**\n * @typedef {(\n *   tokens?: Partial<import('comment-parser').Tokens> | undefined\n * ) => import('comment-parser').Tokens} SeedTokens\n */\n\n/**\n * Sets tokens to empty string.\n * @callback EmptyTokens\n * @param {import('comment-parser').Tokens} tokens\n * @returns {void}\n */\n\n/**\n * @callback AddLine\n * @param {Integer} sourceIndex\n * @param {Partial<import('comment-parser').Tokens>} tokens\n * @returns {void}\n */\n\n/**\n * @callback AddLines\n * @param {Integer} tagIndex\n * @param {Integer} tagSourceOffset\n * @param {Integer} numLines\n * @returns {void}\n */\n\n/**\n * @callback MakeMultiline\n * @returns {void}\n */\n\n/**\n * @callback GetFunctionParameterNames\n * @param {boolean} [useDefaultObjectProperties]\n * @returns {import('./jsdocUtils.js').ParamNameInfo[]}\n */\n\n/**\n * @callback HasParams\n * @returns {Integer}\n */\n\n/**\n * @callback IsGenerator\n * @returns {boolean}\n */\n\n/**\n * @callback IsConstructor\n * @returns {boolean}\n */\n\n/**\n * @callback GetJsdocTagsDeep\n * @param {string} tagName\n * @returns {false|{\n *   idx: Integer,\n *   name: string,\n *   type: string\n * }[]}\n */\n\n/**\n * @callback GetPreferredTagName\n * @param {{\n *   tagName: string,\n *   skipReportingBlockedTag?: boolean,\n *   allowObjectReturn?: boolean,\n *   defaultMessage?: string\n * }} cfg\n * @returns {string|undefined|false|{\n *   message: string;\n *   replacement?: string|undefined;\n * }|{\n *   blocked: true,\n *   tagName: string\n * }}\n */\n\n/**\n * @callback IsValidTag\n * @param {string} name\n * @param {string[]} definedTags\n * @returns {boolean}\n */\n\n/**\n * @callback HasATag\n * @param {string[]} names\n * @returns {boolean}\n */\n\n/**\n * @callback HasTag\n * @param {string} name\n * @returns {boolean}\n */\n\n/**\n * @callback ComparePaths\n * @param {string} name\n * @returns {(otherPathName: string) => boolean}\n */\n\n/**\n * @callback DropPathSegmentQuotes\n * @param {string} name\n * @returns {string}\n */\n\n/**\n * @callback AvoidDocs\n * @returns {boolean}\n */\n\n/**\n * @callback TagMightHaveNamePositionTypePosition\n * @param {string} tagName\n * @param {import('./getDefaultTagStructureForMode.js').\n *   TagStructure[]} [otherModeMaps]\n * @returns {boolean|{otherMode: true}}\n */\n\n/**\n * @callback TagMustHave\n * @param {string} tagName\n * @param {import('./getDefaultTagStructureForMode.js').\n *   TagStructure[]} otherModeMaps\n * @returns {boolean|{\n *   otherMode: false\n * }}\n */\n\n/**\n * @callback TagMissingRequiredTypeOrNamepath\n * @param {import('comment-parser').Spec} tag\n * @param {import('./getDefaultTagStructureForMode.js').\n *   TagStructure[]} otherModeMaps\n * @returns {boolean|{\n *   otherMode: false\n * }}\n */\n\n/**\n * @callback IsNamepathX\n * @param {string} tagName\n * @returns {boolean}\n */\n\n/**\n * @callback GetTagStructureForMode\n * @param {import('./jsdocUtils.js').ParserMode} mde\n * @returns {import('./getDefaultTagStructureForMode.js').TagStructure}\n */\n\n/**\n * @callback MayBeUndefinedTypeTag\n * @param {import('comment-parser').Spec} tag\n * @returns {boolean}\n */\n\n/**\n * @callback HasValueOrExecutorHasNonEmptyResolveValue\n * @param {boolean} anyPromiseAsReturn\n * @param {boolean} [allBranches]\n * @returns {boolean}\n */\n\n/**\n * @callback HasYieldValue\n * @returns {boolean}\n */\n\n/**\n * @callback HasYieldReturnValue\n * @returns {boolean}\n */\n\n/**\n * @callback HasThrowValue\n * @returns {boolean}\n */\n\n/**\n * @callback IsAsync\n * @returns {boolean|undefined}\n */\n\n/**\n * @callback GetTags\n * @param {string} tagName\n * @returns {import('comment-parser').Spec[]}\n */\n\n/**\n * @callback GetPresentTags\n * @param {string[]} tagList\n * @returns {import('@es-joy/jsdoccomment').JsdocTagWithInline[]}\n */\n\n/**\n * @callback FilterTags\n * @param {(tag: import('@es-joy/jsdoccomment').JsdocTagWithInline) => boolean} filter\n * @returns {import('@es-joy/jsdoccomment').JsdocTagWithInline[]}\n */\n\n/**\n * @callback FilterAllTags\n * @param {(tag: (import('comment-parser').Spec|\n *   import('@es-joy/jsdoccomment').JsdocInlineTagNoType)) => boolean} filter\n * @returns {(import('comment-parser').Spec|\n *   import('@es-joy/jsdoccomment').JsdocInlineTagNoType)[]}\n */\n\n/**\n * @callback GetTagsByType\n * @param {import('comment-parser').Spec[]} tags\n * @returns {{\n *   tagsWithNames: import('comment-parser').Spec[],\n *   tagsWithoutNames: import('comment-parser').Spec[]\n * }}\n */\n\n/**\n * @callback HasOptionTag\n * @param {string} tagName\n * @returns {boolean}\n */\n\n/**\n * @callback GetClassNode\n * @returns {Node|null}\n */\n\n/**\n * @callback GetClassJsdoc\n * @returns {null|JsdocBlockWithInline}\n */\n\n/**\n * @callback ClassHasTag\n * @param {string} tagName\n * @returns {boolean}\n */\n\n/**\n * @callback FindContext\n * @param {Context[]} contexts\n * @param {string|undefined} comment\n * @returns {{\n *   foundContext: Context|undefined,\n *   contextStr: string\n * }}\n */\n\n/**\n * @typedef {BasicUtils & {\n *   isIteratingFunction: IsIteratingFunction,\n *   isIteratingFunctionOrVariable: IsIteratingFunction,\n *   isVirtualFunction: IsVirtualFunction,\n *   stringify: Stringify,\n *   reportJSDoc: ReportJSDoc,\n *   getRegexFromString: GetRegexFromString,\n *   getTagDescription: GetTagDescription,\n *   setTagDescription: SetTagDescription,\n *   getDescription: GetDescription,\n *   setBlockDescription: SetBlockDescription,\n *   setDescriptionLines: SetDescriptionLines,\n *   changeTag: ChangeTag,\n *   setTag: SetTag,\n *   removeTag: RemoveTag,\n *   addTag: AddTag,\n *   getFirstLine: GetFirstLine,\n *   seedTokens: SeedTokens,\n *   emptyTokens: EmptyTokens,\n *   addLine: AddLine,\n *   addLines: AddLines,\n *   makeMultiline: MakeMultiline,\n *   flattenRoots: import('./jsdocUtils.js').FlattenRoots,\n *   getFunctionParameterNames: GetFunctionParameterNames,\n *   hasParams: HasParams,\n *   isGenerator: IsGenerator,\n *   isConstructor: IsConstructor,\n *   getJsdocTagsDeep: GetJsdocTagsDeep,\n *   getPreferredTagName: GetPreferredTagName,\n *   isValidTag: IsValidTag,\n *   hasATag: HasATag,\n *   hasTag: HasTag,\n *   comparePaths: ComparePaths,\n *   dropPathSegmentQuotes: DropPathSegmentQuotes,\n *   avoidDocs: AvoidDocs,\n *   tagMightHaveNamePosition: TagMightHaveNamePositionTypePosition,\n *   tagMightHaveTypePosition: TagMightHaveNamePositionTypePosition,\n *   tagMustHaveNamePosition: TagMustHave,\n *   tagMustHaveTypePosition: TagMustHave,\n *   tagMissingRequiredTypeOrNamepath: TagMissingRequiredTypeOrNamepath,\n *   isNamepathDefiningTag: IsNamepathX,\n *   isNamepathReferencingTag: IsNamepathX,\n *   isNamepathOrUrlReferencingTag: IsNamepathX,\n *   tagMightHaveNamepath: IsNamepathX,\n *   getTagStructureForMode: GetTagStructureForMode,\n *   mayBeUndefinedTypeTag: MayBeUndefinedTypeTag,\n *   hasValueOrExecutorHasNonEmptyResolveValue: HasValueOrExecutorHasNonEmptyResolveValue,\n *   hasYieldValue: HasYieldValue,\n *   hasYieldReturnValue: HasYieldReturnValue,\n *   hasThrowValue: HasThrowValue,\n *   isAsync: IsAsync,\n *   getTags: GetTags,\n *   getPresentTags: GetPresentTags,\n *   filterTags: FilterTags,\n *   filterAllTags: FilterAllTags,\n *   getTagsByType: GetTagsByType,\n *   hasOptionTag: HasOptionTag,\n *   getClassNode: GetClassNode,\n *   getClassJsdoc: GetClassJsdoc,\n *   classHasTag: ClassHasTag,\n *   findContext: FindContext\n * }} Utils\n */\n\nconst {\n  rewireSpecs,\n  seedTokens,\n} = util;\n\n/**\n * Should use ESLint rule's typing.\n * @typedef {import('eslint').Rule.RuleMetaData} EslintRuleMeta\n */\n\n/**\n * A plain object for tracking state as needed by rules across iterations.\n * @typedef {{\n *   globalTags: {},\n *   hasDuplicates: {\n *     [key: string]: boolean\n *   },\n *   selectorMap: {\n *     [selector: string]: {\n *       [comment: string]: Integer\n *     }\n *   },\n *   hasTag: {\n *     [key: string]: boolean\n *   },\n *   hasNonComment: number,\n *   hasNonCommentBeforeTag: {\n *     [key: string]: boolean|number\n *   },\n *   foundTypedefValues: string[]\n * }} StateObject\n */\n\n/**\n * The Node AST as supplied by the parser.\n * @typedef {import('eslint').Rule.Node} Node\n */\n\n/*\nconst {\n   align as commentAlign,\n  flow: commentFlow,\n  indent: commentIndent,\n} = transforms;\n*/\n\nconst globalState = new Map();\n/**\n * @param {import('eslint').Rule.RuleContext} context\n * @param {{\n *   tagNamePreference?: import('./jsdocUtils.js').TagNamePreference,\n *   mode?: import('./jsdocUtils.js').ParserMode\n * }} cfg\n * @returns {BasicUtils}\n */\nconst getBasicUtils = (context, {\n  mode,\n  tagNamePreference,\n}) => {\n  /** @type {BasicUtils} */\n  const utils = {};\n\n  for (const method of [\n    'isNamepathDefiningTag',\n    'isNamepathReferencingTag',\n    'isNamepathOrUrlReferencingTag',\n    'tagMightHaveNamepath',\n  ]) {\n    /** @type {IsNamepathX} */\n    utils[\n      /** @type {\"isNamepathDefiningTag\"|\"isNamepathReferencingTag\"|\"isNamepathOrUrlReferencingTag\"|\"tagMightHaveNamepath\"} */ (\n        method\n      )] = (tagName) => {\n      return jsdocUtils[\n        /** @type {\"isNamepathDefiningTag\"|\"isNamepathReferencingTag\"|\"isNamepathOrUrlReferencingTag\"|\"tagMightHaveNamepath\"} */\n        (method)\n      ](tagName);\n    };\n  }\n\n  /** @type {ReportSettings} */\n  utils.reportSettings = (message) => {\n    context.report({\n      loc: {\n        end: {\n          column: 1,\n          line: 1,\n        },\n        start: {\n          column: 1,\n          line: 1,\n        },\n      },\n      message,\n    });\n  };\n\n  /** @type {ParseClosureTemplateTag} */\n  utils.parseClosureTemplateTag = (tag) => {\n    return jsdocUtils.parseClosureTemplateTag(tag);\n  };\n\n  utils.pathDoesNotBeginWith = jsdocUtils.pathDoesNotBeginWith;\n\n  /** @type {GetPreferredTagNameObject} */\n  utils.getPreferredTagNameObject = ({\n    tagName,\n  }) => {\n    const ret = jsdocUtils.getPreferredTagNameSimple(\n      tagName,\n      /** @type {import('./jsdocUtils.js').ParserMode} */ (mode),\n      tagNamePreference,\n      context,\n    );\n    const isObject = ret && typeof ret === 'object';\n    if (ret === false || (isObject && !ret.replacement)) {\n      return {\n        blocked: true,\n        tagName,\n      };\n    }\n\n    return ret;\n  };\n\n  return utils;\n};\n\n/**\n * @callback Report\n * @param {string} message\n * @param {import('eslint').Rule.ReportFixer|null} [fix]\n * @param {null|\n *   {line?: Integer, column?: Integer}|\n *   import('comment-parser').Spec & {line?: Integer}\n * } [jsdocLoc]\n * @param {undefined|{\n *   [key: string]: string\n * }} [data]\n * @returns {void}\n */\n\n/**\n * @param {Node|null} node\n * @param {JsdocBlockWithInline} jsdoc\n * @param {import('eslint').AST.Token} jsdocNode\n * @param {Settings} settings\n * @param {Report} report\n * @param {import('eslint').Rule.RuleContext} context\n * @param {import('eslint').SourceCode} sc\n * @param {boolean|undefined} iteratingAll\n * @param {RuleConfig} ruleConfig\n * @param {string} indent\n * @returns {Utils}\n */\nconst getUtils = (\n  node,\n  jsdoc,\n  jsdocNode,\n  settings,\n  report,\n  context,\n  sc,\n  iteratingAll,\n  ruleConfig,\n  indent,\n) => {\n  const ancestors = /** @type {import('eslint').Rule.Node[]} */ (node ?\n    (sc.getAncestors ?\n      (\n        sc.getAncestors(node)\n      /* c8 ignore next 5 */\n      ) :\n      (\n        // @ts-expect-error ESLint 8\n        context.getAncestors()\n      )) :\n    []);\n\n  /* c8 ignore next -- Fallback to deprecated method */\n  const {\n    sourceCode = context.getSourceCode(),\n  } = context;\n\n  const utils = /** @type {Utils} */ (getBasicUtils(context, settings));\n\n  const {\n    augmentsExtendsReplacesDocs,\n    ignoreReplacesDocs,\n    implementsReplacesDocs,\n    maxLines,\n    minLines,\n    mode,\n    overrideReplacesDocs,\n    tagNamePreference,\n  } = settings;\n\n  const functionTypes = [\n    'ArrowFunctionExpression',\n    'FunctionDeclaration',\n    'FunctionExpression',\n    'MethodDefinition',\n  ];\n\n  /** @type {IsIteratingFunction} */\n  utils.isIteratingFunction = () => {\n    return !iteratingAll || functionTypes.includes(String(node?.type));\n  };\n\n  /** @type {IsIteratingFunction} */\n  utils.isIteratingFunctionOrVariable = () => {\n    if (utils.isIteratingFunction()) {\n      return true;\n    }\n\n    /** @type {import('estree').VariableDeclarator[]} */\n    const declarations = node?.type === 'VariableDeclaration' ?\n      node.declarations :\n      (node?.type === 'ExportNamedDeclaration' && node.declaration?.type === 'VariableDeclaration' ?\n        node.declaration.declarations :\n        []);\n\n    return declarations.some(({\n      init,\n    }) => {\n      return functionTypes.includes(String(init?.type));\n    });\n  };\n\n  /** @type {IsVirtualFunction} */\n  utils.isVirtualFunction = () => {\n    return Boolean(iteratingAll) && utils.hasATag([\n      'callback', 'function', 'func', 'method',\n    ]);\n  };\n\n  /** @type {Stringify} */\n  utils.stringify = (tagBlock, specRewire) => {\n    let block;\n    if (specRewire) {\n      block = rewireSpecs(tagBlock);\n    }\n\n    return commentStringify(/** @type {import('comment-parser').Block} */ (\n      specRewire ? block : tagBlock));\n  };\n\n  /** @type {ReportJSDoc} */\n  utils.reportJSDoc = (msg, tag, handler, specRewire, data) => {\n    report(msg, handler ? /** @type {import('eslint').Rule.ReportFixer} */ (\n      fixer,\n    ) => {\n      const extraFix = handler(fixer);\n\n      const replacement = utils.stringify(jsdoc, specRewire);\n\n      if (!replacement) {\n        const text = sourceCode.getText();\n        const lastLineBreakPos = text.slice(\n          0, jsdocNode.range[0],\n        ).search(/\\n[ \\t]*$/v);\n        if (lastLineBreakPos > -1) {\n          return [\n            fixer.removeRange([\n              lastLineBreakPos, jsdocNode.range[1],\n            ]),\n            /* c8 ignore next 2 -- Guard */\n            ...(extraFix ? [\n              extraFix,\n            ] : []),\n          ];\n        }\n\n        return [\n          fixer.removeRange(\n            (/\\s/v).test(text.charAt(jsdocNode.range[1])) ?\n              [\n                jsdocNode.range[0], jsdocNode.range[1] + 1,\n              ] :\n              jsdocNode.range,\n          ),\n          /* c8 ignore next 2 -- Guard */\n          ...(extraFix ? [\n            extraFix,\n          ] : []),\n        ];\n      }\n\n      return [\n        fixer.replaceText(jsdocNode, replacement),\n        ...(extraFix ? [\n          extraFix,\n        ] : []),\n      ];\n    } : null, tag, data);\n  };\n\n  /** @type {GetRegexFromString} */\n  utils.getRegexFromString = (str, requiredFlags) => {\n    return jsdocUtils.getRegexFromString(str, requiredFlags);\n  };\n\n  /** @type {GetTagDescription} */\n  utils.getTagDescription = (tg, returnArray) => {\n    return jsdocUtils.getTagDescription(tg, returnArray);\n  };\n\n  /** @type {SetTagDescription} */\n  utils.setTagDescription = (tg, matcher, setter) => {\n    let finalIdx = 0;\n    tg.source.some(({\n      tokens: {\n        description,\n      },\n    }, idx) => {\n      if (description && matcher.test(description)) {\n        tg.source[idx].tokens.description = setter(description);\n        finalIdx = idx;\n        return true;\n      }\n\n      return false;\n    });\n\n    return finalIdx;\n  };\n\n  /** @type {GetDescription} */\n  utils.getDescription = () => {\n    /** @type {string[]} */\n    const descriptions = [];\n    let lastDescriptionLine = 0;\n    let tagsBegun = false;\n    jsdoc.source.some(({\n      tokens: {\n        description,\n        end,\n        tag,\n      },\n    }, idx) => {\n      if (tag) {\n        tagsBegun = true;\n      }\n\n      if (idx && (tag || end)) {\n        lastDescriptionLine = idx - 1;\n        if (!tagsBegun && description) {\n          descriptions.push(description);\n        }\n\n        return true;\n      }\n\n      if (!tagsBegun && (idx || description)) {\n        descriptions.push(description || (descriptions.length ? '' : '\\n'));\n      }\n\n      return false;\n    });\n\n    return {\n      description: descriptions.join('\\n'),\n      descriptions,\n      lastDescriptionLine,\n    };\n  };\n\n  /** @type {SetBlockDescription} */\n  utils.setBlockDescription = (setter) => {\n    /** @type {string[]} */\n    const descLines = [];\n    /**\n     * @type {undefined|Integer}\n     */\n    let startIdx;\n    /**\n     * @type {undefined|Integer}\n     */\n    let endIdx;\n\n    /**\n     * @type {undefined|{\n     *   delimiter: string,\n     *   postDelimiter: string,\n     *   start: string\n     * }}\n     */\n    let info;\n\n    jsdoc.source.some(({\n      tokens: {\n        delimiter,\n        description,\n        end,\n        postDelimiter,\n        start,\n        tag,\n      },\n    }, idx) => {\n      if (delimiter === '/**') {\n        return false;\n      }\n\n      if (startIdx === undefined) {\n        startIdx = idx;\n        info = {\n          delimiter,\n          postDelimiter,\n          start,\n        };\n      }\n\n      if (tag || end) {\n        endIdx = idx;\n        return true;\n      }\n\n      descLines.push(description);\n      return false;\n    });\n\n    /* c8 ignore else -- Won't be called if missing */\n    if (descLines.length) {\n      jsdoc.source.splice(\n        /** @type {Integer} */ (startIdx),\n        /** @type {Integer} */ (endIdx) - /** @type {Integer} */ (startIdx),\n        ...setter(\n          /**\n           * @type {{\n           *   delimiter: string,\n           *   postDelimiter: string,\n           *   start: string\n           * }}\n           */\n          (info),\n          seedTokens,\n          descLines,\n        ),\n      );\n    }\n  };\n\n  /** @type {SetDescriptionLines} */\n  utils.setDescriptionLines = (matcher, setter) => {\n    let finalIdx = 0;\n    jsdoc.source.some(({\n      tokens: {\n        description,\n        end,\n        tag,\n      },\n    }, idx) => {\n      /* c8 ignore next 3 -- Already checked */\n      if (idx && (tag || end)) {\n        return true;\n      }\n\n      if (description && matcher.test(description)) {\n        jsdoc.source[idx].tokens.description = setter(description);\n        finalIdx = idx;\n        return true;\n      }\n\n      return false;\n    });\n\n    return finalIdx;\n  };\n\n  /** @type {ChangeTag} */\n  utils.changeTag = (tag, ...tokens) => {\n    for (const [\n      idx,\n      src,\n    ] of tag.source.entries()) {\n      src.tokens = {\n        ...src.tokens,\n        ...tokens[idx],\n      };\n    }\n  };\n\n  /** @type {SetTag} */\n  utils.setTag = (tag, tokens) => {\n    tag.source = [\n      {\n        number: tag.line,\n        // Or tag.source[0].number?\n        source: '',\n        tokens: seedTokens({\n          delimiter: '*',\n          postDelimiter: ' ',\n          start: indent + ' ',\n          tag: '@' + tag.tag,\n          ...tokens,\n        }),\n      },\n    ];\n  };\n\n  /** @type {RemoveTag} */\n  utils.removeTag = (tagIndex, {\n    removeEmptyBlock = false,\n    tagSourceOffset = 0,\n  } = {}) => {\n    const {\n      source: tagSource,\n    } = jsdoc.tags[tagIndex];\n    /** @type {Integer|undefined} */\n    let lastIndex;\n    const firstNumber = jsdoc.source[0].number;\n    tagSource.some(({\n      number,\n    }, tagIdx) => {\n      const sourceIndex = jsdoc.source.findIndex(({\n        number: srcNumber,\n      }) => {\n        return number === srcNumber;\n      });\n      // c8 ignore else\n      if (sourceIndex > -1) {\n        let spliceCount = 1;\n        tagSource.slice(tagIdx + 1).some(({\n          tokens: {\n            end: ending,\n            tag,\n          },\n        }) => {\n          if (!tag && !ending) {\n            spliceCount++;\n\n            return false;\n          }\n\n          return true;\n        });\n\n        const spliceIdx = sourceIndex + tagSourceOffset;\n\n        const {\n          delimiter,\n          end,\n        } = jsdoc.source[spliceIdx].tokens;\n\n        if (\n          spliceIdx === 0 && jsdoc.tags.length >= 2 ||\n          !removeEmptyBlock && (end || delimiter === '/**')\n        ) {\n          const {\n            tokens,\n          } = jsdoc.source[spliceIdx];\n          for (const item of [\n            'postDelimiter',\n            'tag',\n            'postTag',\n            'type',\n            'postType',\n            'name',\n            'postName',\n            'description',\n          ]) {\n            tokens[\n              /**\n               * @type {\"postDelimiter\"|\"tag\"|\"type\"|\"postType\"|\n               *   \"postTag\"|\"name\"|\"postName\"|\"description\"}\n               */ (\n                item\n              )\n            ] = '';\n          }\n        } else {\n          jsdoc.source.splice(spliceIdx, spliceCount - tagSourceOffset + (spliceIdx ? 0 : jsdoc.source.length));\n          tagSource.splice(tagIdx + tagSourceOffset, spliceCount - tagSourceOffset + (spliceIdx ? 0 : jsdoc.source.length));\n        }\n\n        lastIndex = sourceIndex;\n\n        return true;\n      }\n      /* c8 ignore next 2 */\n      // eslint-disable-next-line @stylistic/padding-line-between-statements -- c8\n      return false;\n    });\n    for (const [\n      idx,\n      src,\n    ] of jsdoc.source.slice(lastIndex).entries()) {\n      src.number = firstNumber + /** @type {Integer} */ (lastIndex) + idx;\n    }\n\n    // Todo: Once rewiring of tags may be fixed in comment-parser to reflect\n    //         missing tags, this step should be added here (so that, e.g.,\n    //         if accessing `jsdoc.tags`, such as to add a new tag, the\n    //         correct information will be available)\n  };\n\n  /** @type {AddTag} */\n  utils.addTag = (\n    targetTagName,\n    number = (jsdoc.tags[jsdoc.tags.length - 1]?.source[0]?.number ?? jsdoc.source.findIndex(({\n      tokens: {\n        tag,\n      },\n    }) => {\n      return tag;\n    }) - 1) + 1,\n    tokens = {},\n  ) => {\n    jsdoc.source.splice(number, 0, {\n      number,\n      source: '',\n      tokens: seedTokens({\n        delimiter: '*',\n        postDelimiter: ' ',\n        start: indent + ' ',\n        tag: `@${targetTagName}`,\n        ...tokens,\n      }),\n    });\n    for (const src of jsdoc.source.slice(number + 1)) {\n      src.number++;\n    }\n  };\n\n  /** @type {GetFirstLine} */\n  utils.getFirstLine = () => {\n    let firstLine;\n    for (const {\n      number,\n      tokens: {\n        tag,\n      },\n    } of jsdoc.source) {\n      if (tag) {\n        firstLine = number;\n        break;\n      }\n    }\n\n    return firstLine;\n  };\n\n  /** @type {SeedTokens} */\n  utils.seedTokens = seedTokens;\n\n  /** @type {EmptyTokens} */\n  utils.emptyTokens = (tokens) => {\n    for (const prop of [\n      'start',\n      'postDelimiter',\n      'tag',\n      'type',\n      'postType',\n      'postTag',\n      'name',\n      'postName',\n      'description',\n      'end',\n      'lineEnd',\n    ]) {\n      tokens[\n        /**\n         * @type {\"start\"|\"postDelimiter\"|\"tag\"|\"type\"|\"postType\"|\n         *   \"postTag\"|\"name\"|\"postName\"|\"description\"|\"end\"|\"lineEnd\"}\n         */ (\n          prop\n        )\n      ] = '';\n    }\n  };\n\n  /** @type {AddLine} */\n  utils.addLine = (sourceIndex, tokens) => {\n    const number = (jsdoc.source[sourceIndex - 1]?.number || 0) + 1;\n    jsdoc.source.splice(sourceIndex, 0, {\n      number,\n      source: '',\n      tokens: seedTokens(tokens),\n    });\n\n    for (const src of jsdoc.source.slice(number + 1)) {\n      src.number++;\n    }\n    // If necessary, we can rewire the tags (misnamed method)\n    // rewireSource(jsdoc);\n  };\n\n  /** @type {AddLines} */\n  utils.addLines = (tagIndex, tagSourceOffset, numLines) => {\n    const {\n      source: tagSource,\n    } = jsdoc.tags[tagIndex];\n    /** @type {Integer|undefined} */\n    let lastIndex;\n    const firstNumber = jsdoc.source[0].number;\n    tagSource.some(({\n      number,\n    }) => {\n      const makeLine = () => {\n        return {\n          number,\n          source: '',\n          tokens: seedTokens({\n            delimiter: '*',\n            start: indent + ' ',\n          }),\n        };\n      };\n\n      const makeLines = () => {\n        return Array.from({\n          length: numLines,\n        }, makeLine);\n      };\n\n      const sourceIndex = jsdoc.source.findIndex(({\n        number: srcNumber,\n        tokens: {\n          end,\n        },\n      }) => {\n        return number === srcNumber && !end;\n      });\n      // c8 ignore else\n      if (sourceIndex > -1) {\n        const lines = makeLines();\n        jsdoc.source.splice(sourceIndex + tagSourceOffset, 0, ...lines);\n\n        // tagSource.splice(tagIdx + 1, 0, ...makeLines());\n        lastIndex = sourceIndex;\n\n        return true;\n      }\n      /* c8 ignore next 2 */\n      // eslint-disable-next-line @stylistic/padding-line-between-statements -- c8\n      return false;\n    });\n\n    for (const [\n      idx,\n      src,\n    ] of jsdoc.source.slice(lastIndex).entries()) {\n      src.number = firstNumber + /** @type {Integer} */ (lastIndex) + idx;\n    }\n  };\n\n  /** @type {MakeMultiline} */\n  utils.makeMultiline = () => {\n    const {\n      source: [\n        {\n          tokens,\n        },\n      ],\n    } = jsdoc;\n    const {\n      description,\n      lineEnd,\n      name,\n      postDelimiter,\n      tag,\n      type,\n    } = tokens;\n\n    let {\n      tokens: {\n        postName,\n        postTag,\n        postType,\n      },\n    } = jsdoc.source[0];\n\n    // Strip trailing leftovers from single line ending\n    if (!description) {\n      if (postName) {\n        postName = '';\n      } else if (postType) {\n        postType = '';\n      } else /* c8 ignore else -- `comment-parser` prevents empty blocks currently per https://github.com/syavorsky/comment-parser/issues/128 */ if (postTag) {\n        postTag = '';\n      }\n    }\n\n    utils.emptyTokens(tokens);\n\n    utils.addLine(1, {\n      delimiter: '*',\n\n      // If a description were present, it may have whitespace attached\n      //   due to being at the end of the single line\n      description: description.trimEnd(),\n      name,\n      postDelimiter,\n      postName,\n      postTag,\n      postType,\n      start: indent + ' ',\n      tag,\n      type,\n    });\n    utils.addLine(2, {\n      end: '*/',\n      lineEnd,\n      start: indent + ' ',\n    });\n  };\n\n  /**\n   * @type {import('./jsdocUtils.js').FlattenRoots}\n   */\n  utils.flattenRoots = jsdocUtils.flattenRoots;\n\n  /** @type {GetFunctionParameterNames} */\n  utils.getFunctionParameterNames = (useDefaultObjectProperties) => {\n    return jsdocUtils.getFunctionParameterNames(node, useDefaultObjectProperties);\n  };\n\n  /** @type {HasParams} */\n  utils.hasParams = () => {\n    return jsdocUtils.hasParams(/** @type {Node} */ (node));\n  };\n\n  /** @type {IsGenerator} */\n  utils.isGenerator = () => {\n    return node !== null && Boolean(\n      /**\n       * @type {import('estree').FunctionDeclaration|\n       *   import('estree').FunctionExpression}\n       */ (node).generator ||\n      node.type === 'MethodDefinition' && node.value.generator ||\n      [\n        'ExportDefaultDeclaration', 'ExportNamedDeclaration',\n      ].includes(node.type) &&\n      /** @type {import('estree').FunctionDeclaration} */\n      (\n        /**\n         * @type {import('estree').ExportNamedDeclaration|\n         *   import('estree').ExportDefaultDeclaration}\n         */ (node).declaration\n      )?.generator,\n    );\n  };\n\n  /** @type {IsConstructor} */\n  utils.isConstructor = () => {\n    return jsdocUtils.isConstructor(/** @type {Node} */ (node));\n  };\n\n  /** @type {GetJsdocTagsDeep} */\n  utils.getJsdocTagsDeep = (tagName) => {\n    const name = /** @type {string|false} */ (utils.getPreferredTagName({\n      tagName,\n    }));\n    if (!name) {\n      return false;\n    }\n\n    return jsdocUtils.getJsdocTagsDeep(jsdoc, name);\n  };\n\n  /** @type {GetPreferredTagName} */\n  utils.getPreferredTagName = (args) => {\n    return jsdocUtils.getPreferredTagName(\n      jsdoc, {\n        ...args,\n        context,\n        mode,\n        report,\n        tagNamePreference,\n      },\n    );\n  };\n\n  /** @type {IsValidTag} */\n  utils.isValidTag = (name, definedTags) => {\n    return jsdocUtils.isValidTag(context, mode, name, definedTags);\n  };\n\n  /** @type {HasATag} */\n  utils.hasATag = (names) => {\n    return jsdocUtils.hasATag(jsdoc, names);\n  };\n\n  /** @type {HasTag} */\n  utils.hasTag = (name) => {\n    return jsdocUtils.hasTag(jsdoc, name);\n  };\n\n  /** @type {ComparePaths} */\n  utils.comparePaths = (name) => {\n    return jsdocUtils.comparePaths(name);\n  };\n\n  /** @type {DropPathSegmentQuotes} */\n  utils.dropPathSegmentQuotes = (name) => {\n    return jsdocUtils.dropPathSegmentQuotes(name);\n  };\n\n  /** @type {AvoidDocs} */\n  utils.avoidDocs = () => {\n    if (\n      ignoreReplacesDocs !== false &&\n        (utils.hasTag('ignore') || utils.classHasTag('ignore')) ||\n      overrideReplacesDocs !== false &&\n        (utils.hasTag('override') || utils.classHasTag('override')) ||\n      implementsReplacesDocs !== false &&\n        (utils.hasTag('implements') || utils.classHasTag('implements')) ||\n\n      augmentsExtendsReplacesDocs &&\n        (utils.hasATag([\n          'augments', 'extends',\n        ]) ||\n          utils.classHasTag('augments') ||\n            utils.classHasTag('extends'))) {\n      return true;\n    }\n\n    if (jsdocUtils.exemptSpeciaMethods(\n      jsdoc,\n      node,\n      context,\n      /** @type {import('json-schema').JSONSchema4|import('json-schema').JSONSchema4[]} */ (\n        ruleConfig.meta.schema\n      ),\n    )) {\n      return true;\n    }\n\n    const exemptedBy = context.options[0]?.exemptedBy ?? [\n      'inheritDoc',\n      ...mode === 'closure' ? [] : [\n        'inheritdoc',\n      ],\n    ];\n    if (exemptedBy.length && utils.getPresentTags(exemptedBy).length) {\n      return true;\n    }\n\n    return false;\n  };\n\n  for (const method of [\n    'tagMightHaveNamePosition',\n    'tagMightHaveTypePosition',\n  ]) {\n    /** @type {TagMightHaveNamePositionTypePosition} */\n    utils[\n      /** @type {\"tagMightHaveNamePosition\"|\"tagMightHaveTypePosition\"} */ (\n        method\n      )\n    ] = (tagName, otherModeMaps) => {\n      const result = jsdocUtils[\n        /** @type {\"tagMightHaveNamePosition\"|\"tagMightHaveTypePosition\"} */\n        (method)\n      ](tagName);\n      if (result) {\n        return true;\n      }\n\n      if (!otherModeMaps) {\n        return false;\n      }\n\n      const otherResult = otherModeMaps.some((otherModeMap) => {\n        return jsdocUtils[\n          /** @type {\"tagMightHaveNamePosition\"|\"tagMightHaveTypePosition\"} */\n          (method)\n        ](tagName, otherModeMap);\n      });\n\n      return otherResult ? {\n        otherMode: true,\n      } : false;\n    };\n  }\n\n  /** @type {TagMissingRequiredTypeOrNamepath} */\n  utils.tagMissingRequiredTypeOrNamepath = (tagName, otherModeMaps) => {\n    const result = jsdocUtils.tagMissingRequiredTypeOrNamepath(tagName);\n    if (!result) {\n      return false;\n    }\n\n    const otherResult = otherModeMaps.every((otherModeMap) => {\n      return jsdocUtils.tagMissingRequiredTypeOrNamepath(tagName, otherModeMap);\n    });\n\n    return otherResult ? true : {\n      otherMode: false,\n    };\n  };\n\n  for (const method of [\n    'tagMustHaveNamePosition',\n    'tagMustHaveTypePosition',\n  ]) {\n    /** @type {TagMustHave} */\n    utils[\n      /** @type {\"tagMustHaveNamePosition\"|\"tagMustHaveTypePosition\"} */\n      (method)\n    ] = (tagName, otherModeMaps) => {\n      const result = jsdocUtils[\n        /** @type {\"tagMustHaveNamePosition\"|\"tagMustHaveTypePosition\"} */\n        (method)\n      ](tagName);\n      if (!result) {\n        return false;\n      }\n\n      // if (!otherModeMaps) { return true; }\n\n      const otherResult = otherModeMaps.every((otherModeMap) => {\n        return jsdocUtils[\n          /** @type {\"tagMustHaveNamePosition\"|\"tagMustHaveTypePosition\"} */\n          (method)\n        ](tagName, otherModeMap);\n      });\n\n      return otherResult ? true : {\n        otherMode: false,\n      };\n    };\n  }\n\n  /** @type {GetTagStructureForMode} */\n  utils.getTagStructureForMode = (mde) => {\n    return jsdocUtils.getTagStructureForMode(mde, settings.structuredTags);\n  };\n\n  /** @type {MayBeUndefinedTypeTag} */\n  utils.mayBeUndefinedTypeTag = (tag) => {\n    return jsdocUtils.mayBeUndefinedTypeTag(tag, settings.mode);\n  };\n\n  /** @type {HasValueOrExecutorHasNonEmptyResolveValue} */\n  utils.hasValueOrExecutorHasNonEmptyResolveValue = (anyPromiseAsReturn, allBranches) => {\n    return jsdocUtils.hasValueOrExecutorHasNonEmptyResolveValue(\n      /** @type {Node} */ (node), anyPromiseAsReturn, allBranches,\n    );\n  };\n\n  /** @type {HasYieldValue} */\n  utils.hasYieldValue = () => {\n    if ([\n      'ExportDefaultDeclaration', 'ExportNamedDeclaration',\n    ].includes(/** @type {Node} */ (node).type)) {\n      return jsdocUtils.hasYieldValue(\n        /** @type {import('estree').Declaration|import('estree').Expression} */ (\n          /** @type {import('estree').ExportNamedDeclaration|import('estree').ExportDefaultDeclaration} */\n          (node).declaration\n        ),\n      );\n    }\n\n    return jsdocUtils.hasYieldValue(/** @type {Node} */ (node));\n  };\n\n  /** @type {HasYieldReturnValue} */\n  utils.hasYieldReturnValue = () => {\n    return jsdocUtils.hasYieldValue(/** @type {Node} */ (node), true);\n  };\n\n  /** @type {HasThrowValue} */\n  utils.hasThrowValue = () => {\n    return jsdocUtils.hasThrowValue(node);\n  };\n\n  /** @type {IsAsync} */\n  utils.isAsync = () => {\n    return Boolean(node && 'async' in node && node.async);\n  };\n\n  /** @type {GetTags} */\n  utils.getTags = (tagName) => {\n    return jsdocUtils.getTags(jsdoc, tagName);\n  };\n\n  /** @type {GetPresentTags} */\n  utils.getPresentTags = (tagList) => {\n    return jsdocUtils.filterTags(jsdoc, (tag) => {\n      return tagList.includes(tag.tag);\n    });\n  };\n\n  /** @type {FilterTags} */\n  utils.filterTags = (filter) => {\n    return jsdocUtils.filterTags(jsdoc, (tag) => {\n      return filter(tag);\n    });\n  };\n\n  /** @type {FilterAllTags} */\n  utils.filterAllTags = (filter) => {\n    const tags = jsdocUtils.getAllTags(jsdoc);\n    return tags.filter((tag) => {\n      return filter(tag);\n    });\n  };\n\n  /** @type {GetTagsByType} */\n  utils.getTagsByType = (tags) => {\n    return jsdocUtils.getTagsByType(context, mode, tags);\n  };\n\n  /** @type {HasOptionTag} */\n  utils.hasOptionTag = (tagName) => {\n    const {\n      tags,\n    } = context.options[0] ?? {};\n\n    return Boolean(tags && tags.includes(tagName));\n  };\n\n  /** @type {GetClassNode} */\n  utils.getClassNode = () => {\n    // eslint-disable-next-line canonical/no-use-extend-native -- Not extending\n    return [\n      ...ancestors, node,\n    ].toReversed().find((parent) => {\n      return parent && [\n        'ClassDeclaration', 'ClassExpression',\n      ].includes(parent.type);\n    }) ?? null;\n  };\n\n  /** @type {GetClassJsdoc} */\n  utils.getClassJsdoc = () => {\n    const classNode = utils.getClassNode();\n\n    if (!classNode) {\n      return null;\n    }\n\n    const classJsdocNode = getJSDocComment(sourceCode, classNode, {\n      maxLines,\n      minLines,\n    });\n\n    if (classJsdocNode) {\n      return parseComment(classJsdocNode, '');\n    }\n\n    return null;\n  };\n\n  /** @type {ClassHasTag} */\n  utils.classHasTag = (tagName) => {\n    const classJsdoc = utils.getClassJsdoc();\n\n    return classJsdoc !== null && jsdocUtils.hasTag(classJsdoc, tagName);\n  };\n\n  /** @type {ForEachPreferredTag} */\n  utils.forEachPreferredTag = (tagName, arrayHandler, skipReportingBlockedTag) => {\n    return jsdocUtils.forEachPreferredTag(\n      jsdoc, tagName, arrayHandler, {\n        context,\n        mode,\n        report,\n        skipReportingBlockedTag,\n        tagNamePreference,\n      },\n    );\n  };\n\n  /** @type {FindContext} */\n  utils.findContext = (contexts, comment) => {\n    const foundContext = contexts.find((cntxt) => {\n      return typeof cntxt === 'string' ?\n        esquery.matches(\n          /** @type {Node} */ (node),\n          esquery.parse(cntxt),\n          undefined,\n          {\n            visitorKeys: sourceCode.visitorKeys,\n          },\n        ) :\n        (!cntxt.context || cntxt.context === 'any' ||\n        esquery.matches(\n          /** @type {Node} */ (node),\n          esquery.parse(cntxt.context),\n          undefined,\n          {\n            visitorKeys: sourceCode.visitorKeys,\n          },\n        )) && comment === cntxt.comment;\n    });\n\n    const contextStr = typeof foundContext === 'object' ?\n      foundContext.context ?? 'any' :\n      String(foundContext);\n\n    return {\n      contextStr,\n      foundContext,\n    };\n  };\n\n  return utils;\n};\n\n/**\n * @typedef {{\n *   [key: string]: false|string|{\n *     message: string,\n *     replacement?: false|string\n *     skipRootChecking?: boolean\n *     unifyParentAndChildTypeChecks?: boolean\n *   }\n * }} PreferredTypes\n */\n/**\n * @typedef {{\n *   [key: string]: {\n *     name?: \"text\"|\"namepath-defining\"|\"namepath-referencing\"|false,\n *     type?: boolean|string[],\n *     required?: (\"name\"|\"type\"|\"typeOrNameRequired\")[]\n *   }\n * }} StructuredTags\n */\n/**\n * Settings from ESLint types.\n * @typedef {{\n *   maxLines: Integer,\n *   minLines: Integer,\n *   tagNamePreference: import('./jsdocUtils.js').TagNamePreference,\n *   mode: import('./jsdocUtils.js').ParserMode,\n *   preferredTypes: PreferredTypes,\n *   structuredTags: StructuredTags,\n *   contexts?: Context[],\n *   augmentsExtendsReplacesDocs?: boolean,\n *   ignoreReplacesDocs?: boolean,\n *   implementsReplacesDocs?: boolean,\n *   overrideReplacesDocs?: boolean,\n *   ignoreInternal?: boolean,\n *   ignorePrivate?: boolean,\n *   exemptDestructuredRootsFromChecks?: boolean,\n * }} Settings\n */\n\n/**\n * @typedef {{\n *   settings?: {\n *     jsdoc?: {\n *       ignorePrivate: boolean,\n *       ignoreInternal: boolean,\n *       maxLines: Integer,\n *       minLines: Integer,\n *       tagNamePreference: import('./jsdocUtils.js').TagNamePreference,\n *       preferredTypes: PreferredTypes,\n *       structuredTags: StructuredTags,\n *       overrideReplacesDocs: boolean,\n *       ignoreReplacesDocs: boolean,\n *       implementsReplacesDocs: boolean,\n *       augmentsExtendsReplacesDocs: boolean,\n *       exemptDestructuredRootsFromChecks: boolean,\n *       mode: import('./jsdocUtils.js').ParserMode,\n *       contexts: Context[],\n *     }\n *   }\n * }} JSDocSettings\n */\n\n/**\n * @param {import('eslint').Rule.RuleContext & JSDocSettings} context\n * @returns {Settings|false}\n */\nconst getSettings = (context) => {\n  /* eslint-disable perfectionist/sort-objects */\n  const settings = {\n    // All rules\n    ignorePrivate: Boolean(context.settings.jsdoc?.ignorePrivate),\n    ignoreInternal: Boolean(context.settings.jsdoc?.ignoreInternal),\n    maxLines: Number(context.settings.jsdoc?.maxLines ?? 1),\n    minLines: Number(context.settings.jsdoc?.minLines ?? 0),\n\n    // `check-tag-names` and many returns/param rules\n    tagNamePreference: context.settings.jsdoc?.tagNamePreference ?? {},\n\n    // `check-types` and `no-undefined-types`\n    preferredTypes: context.settings.jsdoc?.preferredTypes ?? {},\n\n    // `check-types`, `no-undefined-types`, `valid-types`\n    structuredTags: context.settings.jsdoc?.structuredTags ?? {},\n\n    // `require-param`, `require-description`, `require-example`,\n    // `require-returns`, `require-throw`, `require-yields`\n    overrideReplacesDocs: context.settings.jsdoc?.overrideReplacesDocs,\n    ignoreReplacesDocs: context.settings.jsdoc?.ignoreReplacesDocs,\n    implementsReplacesDocs: context.settings.jsdoc?.implementsReplacesDocs,\n    augmentsExtendsReplacesDocs: context.settings.jsdoc?.augmentsExtendsReplacesDocs,\n\n    // `require-param-type`, `require-param-description`\n    exemptDestructuredRootsFromChecks: context.settings.jsdoc?.exemptDestructuredRootsFromChecks,\n\n    // Many rules, e.g., `check-tag-names`\n    mode: context.settings.jsdoc?.mode ?? 'typescript',\n\n    // Many rules\n    contexts: context.settings.jsdoc?.contexts,\n  };\n  /* eslint-enable perfectionist/sort-objects */\n\n  jsdocUtils.setTagStructure(settings.mode);\n  try {\n    jsdocUtils.overrideTagStructure(settings.structuredTags);\n  } catch (error) {\n    context.report({\n      loc: {\n        end: {\n          column: 1,\n          line: 1,\n        },\n        start: {\n          column: 1,\n          line: 1,\n        },\n      },\n      message: /** @type {Error} */ (error).message,\n    });\n\n    return false;\n  }\n\n  return settings;\n};\n\n/**\n * Create the report function\n * @callback MakeReport\n * @param {import('eslint').Rule.RuleContext} context\n * @param {import('estree').Node} commentNode\n * @returns {Report}\n */\n\n/** @type {MakeReport} */\nconst makeReport = (context, commentNode) => {\n  /** @type {Report} */\n  const report = (message, fix = null, jsdocLoc = null, data = undefined) => {\n    let loc;\n\n    if (jsdocLoc) {\n      if (!('line' in jsdocLoc)) {\n        jsdocLoc.line = /** @type {import('comment-parser').Spec & {line?: Integer}} */ (\n          jsdocLoc\n        ).source[0].number;\n      }\n\n      const lineNumber = /** @type {import('eslint').AST.SourceLocation} */ (\n        commentNode.loc\n      ).start.line +\n      /** @type {Integer} */ (jsdocLoc.line);\n\n      loc = {\n        end: {\n          column: 0,\n          line: lineNumber,\n        },\n        start: {\n          column: 0,\n          line: lineNumber,\n        },\n      };\n\n      if ('column' in jsdocLoc && typeof jsdocLoc.column === 'number') {\n        const colNumber = /** @type {import('eslint').AST.SourceLocation} */ (\n          commentNode.loc\n        ).start.column + jsdocLoc.column;\n\n        loc.end.column = colNumber;\n        loc.start.column = colNumber;\n      }\n    }\n\n    context.report({\n      data,\n      fix,\n      loc,\n      message,\n      node: commentNode,\n    });\n  };\n\n  return report;\n};\n\n/**\n * @typedef {(\n *   arg: {\n *     context: import('eslint').Rule.RuleContext,\n *     sourceCode: import('eslint').SourceCode,\n *     indent?: string,\n *     info?: {\n *       comment?: string|undefined,\n *       lastIndex?: Integer|undefined\n *     },\n *     state?: StateObject,\n *     globalState?: Map<string, Map<string, string>>,\n *     jsdoc?: JsdocBlockWithInline,\n *     jsdocNode?: import('eslint').Rule.Node & {\n *       range: [number, number]\n *     },\n *     node?: Node,\n *     allComments?: import('estree').Node[]\n *     report?: Report,\n *     makeReport?: MakeReport,\n *     settings: Settings,\n *     utils: BasicUtils,\n *   }\n * ) => void } JsdocVisitorBasic\n */\n/**\n * @typedef {(\n *   arg: {\n *     context: import('eslint').Rule.RuleContext,\n *     sourceCode: import('eslint').SourceCode,\n *     indent: string,\n *     info: {\n *       comment?: string|undefined,\n *       lastIndex?: Integer|undefined\n *     },\n *     state: StateObject,\n *     globalState: Map<string, Map<string, string>>,\n *     jsdoc: JsdocBlockWithInline,\n *     jsdocNode: import('eslint').Rule.Node & {\n *       range: [number, number]\n *     },\n *     node: Node|null,\n *     allComments?: import('estree').Node[]\n *     report: Report,\n *     makeReport?: MakeReport,\n *     settings: Settings,\n *     utils: Utils,\n *   }\n * ) => void } JsdocVisitor\n */\n\n/**\n * @param {{\n *   comment?: string,\n *   lastIndex?: Integer,\n *   selector?: string,\n *   isFunctionContext?: boolean,\n * }} info\n * @param {string} indent\n * @param {JsdocBlockWithInline} jsdoc\n * @param {RuleConfig} ruleConfig\n * @param {import('eslint').Rule.RuleContext} context\n * @param {import('@es-joy/jsdoccomment').Token} jsdocNode\n * @param {Node|null} node\n * @param {Settings} settings\n * @param {import('eslint').SourceCode} sourceCode\n * @param {JsdocVisitor} iterator\n * @param {StateObject} state\n * @param {boolean} [iteratingAll]\n * @returns {void}\n */\nconst iterate = (\n  info,\n  indent, jsdoc,\n  ruleConfig, context, jsdocNode, node, settings,\n  sourceCode, iterator, state, iteratingAll,\n) => {\n  const jsdocNde = /** @type {unknown} */ (jsdocNode);\n  const report = makeReport(\n    context,\n    /** @type {import('estree').Node} */\n    (jsdocNde),\n  );\n\n  const utils = getUtils(\n    node,\n    jsdoc,\n    /** @type {import('eslint').AST.Token} */\n    (jsdocNode),\n    settings,\n    report,\n    context,\n    sourceCode,\n    iteratingAll,\n    ruleConfig,\n    indent,\n  );\n\n  if (\n    !ruleConfig.checkInternal && settings.ignoreInternal &&\n    utils.hasTag('internal')\n  ) {\n    return;\n  }\n\n  if (\n    !ruleConfig.checkPrivate && settings.ignorePrivate &&\n    (\n      utils.hasTag('private') ||\n      jsdocUtils\n        .filterTags(jsdoc, ({\n          tag,\n        }) => {\n          return tag === 'access';\n        })\n        .some(({\n          description,\n        }) => {\n          return description === 'private';\n        })\n    )\n  ) {\n    return;\n  }\n\n  iterator({\n    context,\n    globalState,\n    indent,\n    info,\n    jsdoc,\n    jsdocNode: /**\n                * @type {import('eslint').Rule.Node & {\n                *  range: [number, number];}}\n                */ (jsdocNde),\n    node,\n    report,\n    settings,\n    sourceCode,\n    state,\n    utils,\n  });\n};\n\n/**\n * @param {string[]} lines\n * @param {import('estree').Comment} jsdocNode\n * @returns {[indent: string, jsdoc: JsdocBlockWithInline]}\n */\nconst getIndentAndJSDoc = function (lines, jsdocNode) {\n  const sourceLine = lines[\n    /** @type {import('estree').SourceLocation} */\n    (jsdocNode.loc).start.line - 1\n  ];\n\n  let indentChar = sourceLine.charAt(0);\n  if (indentChar !== ' ' && indentChar !== '\\t') {\n    indentChar = ' ';\n  }\n\n  const indnt = indentChar.repeat(\n    /** @type {import('estree').SourceLocation} */\n    (jsdocNode.loc).start.column,\n  );\n\n  const jsdc = parseComment(jsdocNode, '');\n\n  return [\n    indnt, jsdc,\n  ];\n};\n\n/**\n *\n * @typedef {{node: Node & {\n *   range: [number, number]\n * }, state: StateObject}} NonCommentArgs\n */\n\n/**\n * @typedef {object} RuleConfig\n * @property {EslintRuleMeta} meta ESLint rule meta\n * @property {import('./jsdocUtils.js').DefaultContexts} [contextDefaults] Any default contexts\n * @property {true} [contextSelected] Whether to force a `contexts` check\n * @property {(context: import('eslint').Rule.RuleContext) => import('eslint').Rule.RuleContext} [modifyContext] Modify the rule's context object\n * @property {true} [iterateAllJsdocs] Whether to iterate all JSDoc blocks by default\n *   regardless of context\n * @property {true} [checkPrivate] Whether to check `@private` blocks (normally exempted)\n * @property {true} [checkInternal] Whether to check `@internal` blocks (normally exempted)\n * @property {true} [checkFile] Whether to iterates over all JSDoc blocks regardless of attachment\n * @property {true} [nonGlobalSettings] Whether to avoid relying on settings for global contexts\n * @property {true} [noTracking] Whether to disable the tracking of visited comment nodes (as\n *   non-tracked may conduct further actions)\n * @property {true} [matchContext] Whether the rule expects contexts to be based on a match option\n * @property {(args: {\n *   context: import('eslint').Rule.RuleContext,\n *   state: StateObject,\n *   settings: Settings,\n *   utils: BasicUtils\n * }) => void} [exit] Handler to be executed upon exiting iteration of program AST\n * @property {(nca: NonCommentArgs) => void} [nonComment] Handler to be executed if rule wishes\n *   to be supplied nodes without comments\n */\n\n/**\n * Create an eslint rule that iterates over all JSDocs, regardless of whether\n * they are attached to a function-like node.\n * @param {JsdocVisitor} iterator\n * @param {RuleConfig} ruleConfig The rule's configuration\n * @param {ContextObject[]|null} [contexts] The `contexts` containing relevant `comment` info.\n * @param {boolean} [additiveCommentContexts] If true, will have a separate\n *   iteration for each matching comment context. Otherwise, will iterate\n *   once if there is a single matching comment context.\n * @returns {import('eslint').Rule.RuleModule}\n */\nconst iterateAllJsdocs = (iterator, ruleConfig, contexts, additiveCommentContexts) => {\n  const trackedJsdocs = new Set();\n\n  /** @type {import('@es-joy/jsdoccomment').CommentHandler} */\n  let handler;\n\n  /** @type {Settings|false} */\n  let settings;\n\n  /**\n   * @param {import('eslint').Rule.RuleContext} context\n   * @param {Node|null} node\n   * @param {import('estree').Comment[]} jsdocNodes\n   * @param {StateObject} state\n   * @param {boolean} [lastCall]\n   * @returns {void}\n   */\n  const callIterator = (context, node, jsdocNodes, state, lastCall) => {\n    /* c8 ignore next -- Fallback to deprecated method */\n    const {\n      sourceCode = context.getSourceCode(),\n    } = context;\n    const {\n      lines,\n    } = sourceCode;\n\n    const utils = getBasicUtils(context, /** @type {Settings} */ (settings));\n    for (const jsdocNode of jsdocNodes) {\n      const jsdocNde = /** @type {unknown} */ (jsdocNode);\n      if (!(/^\\/\\*\\*\\s/v).test(sourceCode.getText(\n        /** @type {import('estree').Node} */\n        (jsdocNde),\n      ))) {\n        continue;\n      }\n\n      const [\n        indent,\n        jsdoc,\n      ] = getIndentAndJSDoc(\n        lines, jsdocNode,\n      );\n\n      if (additiveCommentContexts) {\n        for (const [\n          idx,\n          {\n            comment,\n          },\n        ] of /** @type {ContextObject[]} */ (contexts).entries()) {\n          if (comment && handler(comment, jsdoc) === false) {\n            continue;\n          }\n\n          iterate(\n            {\n              comment,\n              lastIndex: idx,\n              selector: node?.type,\n            },\n            indent,\n            jsdoc,\n            ruleConfig,\n            context,\n            jsdocNode,\n            /** @type {Node} */\n            (node),\n            /** @type {Settings} */\n            (settings),\n            sourceCode,\n            iterator,\n            state,\n            true,\n          );\n        }\n\n        continue;\n      }\n\n      let lastComment;\n      let lastIndex;\n      // eslint-disable-next-line no-loop-func\n      if (contexts && contexts.every(({\n        comment,\n      }, idx) => {\n        lastComment = comment;\n        lastIndex = idx;\n\n        return comment && handler(comment, jsdoc) === false;\n      })) {\n        continue;\n      }\n\n      iterate(\n        lastComment ? {\n          comment: lastComment,\n          lastIndex,\n          selector: node?.type,\n        } : {\n          lastIndex,\n          selector: node?.type,\n        },\n        indent,\n        jsdoc,\n        ruleConfig,\n        context,\n        jsdocNode,\n        node,\n        /** @type {Settings} */\n        (settings),\n        sourceCode,\n        iterator,\n        state,\n        true,\n      );\n    }\n\n    const settngs = /** @type {Settings} */ (settings);\n\n    if (lastCall && ruleConfig.exit) {\n      ruleConfig.exit({\n        context,\n        settings: settngs,\n        state,\n        utils,\n      });\n    }\n  };\n\n  return {\n    create (context) {\n      /* c8 ignore next -- Fallback to deprecated method */\n      const {\n        sourceCode = context.getSourceCode(),\n      } = context;\n      settings = getSettings(context);\n      if (!settings) {\n        return {};\n      }\n\n      if (contexts) {\n        handler = commentHandler({\n          ...settings,\n          mode: settings.mode === 'permissive' ? 'typescript' : settings.mode,\n        });\n      }\n\n      const state = {};\n\n      return {\n        /**\n         * @param {import('eslint').Rule.Node & {\n         *   range: [Integer, Integer];\n         * }} node\n         * @returns {void}\n         */\n        '*:not(Program)' (node) {\n          const commentNode = getJSDocComment(\n            sourceCode, node, /** @type {Settings} */ (settings),\n          );\n          if (!ruleConfig.noTracking && trackedJsdocs.has(commentNode)) {\n            return;\n          }\n\n          if (!commentNode) {\n            if (ruleConfig.nonComment) {\n              const ste = /** @type {StateObject} */ (state);\n              ruleConfig.nonComment({\n                node,\n                state: ste,\n              });\n            }\n\n            return;\n          }\n\n          trackedJsdocs.add(commentNode);\n          callIterator(context, node, [\n            /** @type {import('estree').Comment} */\n            (commentNode),\n          ], /** @type {StateObject} */ (state));\n        },\n        'Program:exit' () {\n          const allComments = sourceCode.getAllComments();\n          const untrackedJSdoc = allComments.filter((node) => {\n            return !trackedJsdocs.has(node);\n          });\n\n          callIterator(\n            context,\n            null,\n            untrackedJSdoc,\n            /** @type {StateObject} */\n            (state),\n            true,\n          );\n        },\n      };\n    },\n    meta: ruleConfig.meta,\n  };\n};\n\n/**\n * Create an eslint rule that iterates over all JSDocs, regardless of whether\n * they are attached to a function-like node.\n * @param {JsdocVisitorBasic} iterator\n * @param {RuleConfig} ruleConfig\n * @returns {import('eslint').Rule.RuleModule}\n */\nconst checkFile = (iterator, ruleConfig) => {\n  return {\n    create (context) {\n      /* c8 ignore next -- Fallback to deprecated method */\n      const {\n        sourceCode = context.getSourceCode(),\n      } = context;\n      const settings = getSettings(context);\n      if (!settings) {\n        return {};\n      }\n\n      return {\n        'Program:exit' () {\n          const allComms = /** @type {unknown} */ (sourceCode.getAllComments());\n          const utils = getBasicUtils(context, settings);\n\n          iterator({\n            allComments: /** @type {import('estree').Node[]} */ (allComms),\n            context,\n            makeReport,\n            settings,\n            sourceCode,\n            utils,\n          });\n        },\n      };\n    },\n    meta: ruleConfig.meta,\n  };\n};\n\nexport {\n  getSettings,\n  // dslint-disable-next-line unicorn/prefer-export-from -- Avoid experimental parser\n\n};\n\n/**\n * @param {JsdocVisitor} iterator\n * @param {RuleConfig} ruleConfig\n * @returns {import('eslint').Rule.RuleModule}\n */\nexport default function iterateJsdoc (iterator, ruleConfig) {\n  const metaType = ruleConfig?.meta?.type;\n  if (!metaType || ![\n    'layout', 'problem', 'suggestion',\n  ].includes(metaType)) {\n    throw new TypeError('Rule must include `meta.type` option (with value \"problem\", \"suggestion\", or \"layout\")');\n  }\n\n  if (typeof iterator !== 'function') {\n    throw new TypeError('The iterator argument must be a function.');\n  }\n\n  if (ruleConfig.checkFile) {\n    return checkFile(\n      /** @type {JsdocVisitorBasic} */ (iterator),\n      ruleConfig,\n    );\n  }\n\n  if (ruleConfig.iterateAllJsdocs) {\n    return iterateAllJsdocs(iterator, ruleConfig);\n  }\n\n  /** @type {import('eslint').Rule.RuleModule} */\n  return {\n    /**\n     * The entrypoint for the JSDoc rule.\n     * @param {import('eslint').Rule.RuleContext} ctx\n     *   a reference to the context which hold all important information\n     *   like settings and the sourcecode to check.\n     * @returns {import('eslint').Rule.RuleListener}\n     *   a listener with parser callback function.\n     */\n    create (ctx) {\n      const context = ruleConfig.modifyContext ?\n        ruleConfig.modifyContext(ctx) :\n        ctx;\n\n      const settings = getSettings(context);\n      if (!settings) {\n        return {};\n      }\n\n      /**\n       * @type {Context[]|undefined}\n       */\n      let contexts;\n      if (ruleConfig.contextDefaults || ruleConfig.contextSelected || ruleConfig.matchContext) {\n        contexts = ruleConfig.matchContext && context.options[0]?.match ?\n          context.options[0].match :\n          jsdocUtils.enforcedContexts(context, ruleConfig.contextDefaults, ruleConfig.nonGlobalSettings ? {} : settings);\n\n        if (contexts) {\n          contexts = contexts.map((obj) => {\n            if (typeof obj === 'object' && !obj.context) {\n              return {\n                ...obj,\n                context: 'any',\n              };\n            }\n\n            return obj;\n          });\n        }\n\n        const hasPlainAny = contexts?.includes('any');\n        const hasObjectAny = !hasPlainAny && contexts?.find((ctxt) => {\n          if (typeof ctxt === 'string') {\n            return false;\n          }\n\n          return ctxt?.context === 'any';\n        });\n        if (hasPlainAny || hasObjectAny) {\n          return iterateAllJsdocs(\n            iterator,\n            ruleConfig,\n            hasObjectAny ? /** @type {ContextObject[]} */ (contexts) : null,\n            ruleConfig.matchContext,\n          ).create(context);\n        }\n      }\n\n      /* c8 ignore next -- Fallback to deprecated method */\n      const {\n        sourceCode = context.getSourceCode(),\n      } = context;\n      const {\n        lines,\n      } = sourceCode;\n\n      /** @type {Partial<StateObject>} */\n      const state = {};\n\n      /** @type {CheckJsdoc} */\n      const checkJsdoc = (info, handler, node) => {\n        const jsdocNode = getJSDocComment(sourceCode, node, settings);\n        if (!jsdocNode) {\n          return;\n        }\n\n        const [\n          indent,\n          jsdoc,\n        ] = getIndentAndJSDoc(\n          lines,\n          /** @type {import('estree').Comment} */\n          (jsdocNode),\n        );\n\n        if (\n          // Note, `handler` should already be bound in its first argument\n          //  with these only to be called after the value of\n          //  `comment`\n          handler && handler(jsdoc) === false\n        ) {\n          return;\n        }\n\n        iterate(\n          info,\n          indent,\n          jsdoc,\n          ruleConfig,\n          context,\n          jsdocNode,\n          node,\n          settings,\n          sourceCode,\n          iterator,\n          /** @type {StateObject} */\n          (state),\n        );\n      };\n\n      /** @type {import('eslint').Rule.RuleListener} */\n      let contextObject = {};\n\n      if (contexts && (\n        ruleConfig.contextDefaults || ruleConfig.contextSelected || ruleConfig.matchContext\n      )) {\n        contextObject = jsdocUtils.getContextObject(\n          contexts,\n          checkJsdoc,\n          commentHandler({\n            ...settings,\n            mode: settings.mode === 'permissive' ? 'typescript' : settings.mode,\n          }),\n        );\n      } else {\n        for (const prop of [\n          'ArrowFunctionExpression',\n          'FunctionDeclaration',\n          'FunctionExpression',\n          'TSDeclareFunction',\n        ]) {\n          contextObject[prop] = checkJsdoc.bind(null, {\n            selector: prop,\n          }, null);\n        }\n      }\n\n      if (typeof ruleConfig.exit === 'function') {\n        contextObject['Program:exit'] = () => {\n          const ste = /** @type {StateObject} */ (state);\n\n          // @ts-expect-error `utils` not needed at this point\n          /** @type {Required<RuleConfig>} */ (ruleConfig).exit({\n            context,\n            settings,\n            state: ste,\n          });\n        };\n      }\n\n      return contextObject;\n    },\n    meta: ruleConfig.meta,\n  };\n}\n\nexport {\n  parseComment,\n} from '@es-joy/jsdoccomment';\n"],"mappings":";;;;;;;;;;;;;AAAA,IAAAA,UAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,aAAA,GAAAD,OAAA;AAKA,IAAAE,cAAA,GAAAF,OAAA;AAIA,IAAAG,QAAA,GAAAC,sBAAA,CAAAJ,OAAA;AAA8B,SAAAI,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAN,wBAAAM,CAAA,EAAAG,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAV,uBAAA,YAAAA,CAAAM,CAAA,EAAAG,CAAA,SAAAA,CAAA,IAAAH,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,MAAAO,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAR,OAAA,EAAAF,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAS,CAAA,MAAAF,CAAA,GAAAJ,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAE,CAAA,CAAAI,GAAA,CAAAX,CAAA,UAAAO,CAAA,CAAAK,GAAA,CAAAZ,CAAA,GAAAO,CAAA,CAAAM,GAAA,CAAAb,CAAA,EAAAS,CAAA,gBAAAN,CAAA,IAAAH,CAAA,gBAAAG,CAAA,OAAAW,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAG,CAAA,OAAAK,CAAA,IAAAD,CAAA,GAAAS,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAG,CAAA,OAAAK,CAAA,CAAAI,GAAA,IAAAJ,CAAA,CAAAK,GAAA,IAAAN,CAAA,CAAAE,CAAA,EAAAN,CAAA,EAAAK,CAAA,IAAAC,CAAA,CAAAN,CAAA,IAAAH,CAAA,CAAAG,CAAA,WAAAM,CAAA,KAAAT,CAAA,EAAAG,CAAA;AAE9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EACJgB,WAAW;EACXC;AACF,CAAC,GAAGC,mBAAI;;AAER;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","ignoreList":[]}